<!doctype html><html><head><meta charset="utf-8"><style>* { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --bg: #ffffff;
      --bg-secondary: #f5f5f5;
      --text: #333333;
      --text-secondary: #666666;
      --text-tertiary: #999999;
      --border: #e0e0e0;
      --primary: #18a0fb;
      --primary-hover: #0d8de6;
      --primary-light: #e8f4fd;
      --success: #1bc47d;
      --error: #f24822;
      --radius: 6px;
      --font: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    }

    html, body {
      font-family: var(--font);
      font-size: 12px;
      color: var(--text);
      background: var(--bg);
      height: 100%;
    }

    .app {
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 16px;
      gap: 16px;
    }

    h2 {
      font-size: 14px;
      font-weight: 700;
    }

    .field label {
      display: block;
      font-size: 11px;
      font-weight: 500;
      color: var(--text-secondary);
      margin-bottom: 6px;
    }

    input[type="url"] {
      width: 100%;
      padding: 10px 12px;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      font-family: var(--font);
      font-size: 13px;
      color: var(--text);
      background: var(--bg);
      outline: none;
      transition: border-color 0.15s;
    }

    input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 1px var(--primary);
    }

    input::placeholder { color: var(--text-tertiary); }

    .viewport-selector {
      display: flex;
      gap: 8px;
    }

    .viewport-option {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 10px 6px;
      border: 1.5px solid var(--border);
      border-radius: var(--radius);
      cursor: pointer;
      transition: all 0.15s;
      user-select: none;
    }

    .viewport-option:hover { border-color: var(--primary); background: var(--primary-light); }

    .viewport-option.selected {
      border-color: var(--primary);
      background: var(--primary-light);
    }

    .viewport-option svg { width: 24px; height: 24px; fill: var(--text-secondary); }
    .viewport-option.selected svg { fill: var(--primary); }

    .viewport-option span { font-size: 10px; color: var(--text-secondary); font-weight: 500; }
    .viewport-option.selected span { color: var(--primary); }
    .viewport-option .size { font-size: 9px; color: var(--text-tertiary); }
    .viewport-option.selected .size { color: var(--primary); }

    .btn {
      width: 100%;
      padding: 12px;
      border: none;
      border-radius: var(--radius);
      font-family: var(--font);
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      background: var(--primary);
      color: white;
      transition: background 0.15s;
    }

    .btn:hover { background: var(--primary-hover); }
    .btn:disabled { background: var(--border); cursor: not-allowed; }

    .progress-container {
      display: none;
    }

    .progress-container.visible { display: block; }

    .progress-bar {
      width: 100%;
      height: 4px;
      background: var(--bg-secondary);
      border-radius: 2px;
      overflow: hidden;
      margin-bottom: 6px;
    }

    .progress-fill {
      height: 100%;
      background: var(--primary);
      transition: width 0.3s ease;
      border-radius: 2px;
    }

    .progress-text {
      font-size: 11px;
      color: var(--text-secondary);
      text-align: center;
    }

    .status-message {
      display: none;
      padding: 10px 12px;
      border-radius: var(--radius);
      font-size: 11px;
    }

    .status-message.visible { display: block; }
    .status-message.success { background: #e6f9f0; color: #0d6e3f; }
    .status-message.error { background: #fdecea; color: #b71c1c; }

    .spacer { flex: 1; }

    .footer {
      font-size: 10px;
      color: var(--text-tertiary);
      text-align: center;
    }</style></head><body><div class="app"><h2>HTML to Design</h2><div class="field"><label for="url-input">Website URL</label> <input type="url" id="url-input" placeholder="https://example.com" autofocus/></div><div class="field"><label>Viewport</label><div class="viewport-selector"><div class="viewport-option selected" data-viewport="desktop"><svg viewBox="0 0 24 24"><path d="M21 2H3c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h7l-2 3v1h8v-1l-2-3h7c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H3V4h18v12z"/></svg> <span>Desktop</span> <span class="size">1440px</span></div><div class="viewport-option" data-viewport="tablet"><svg viewBox="0 0 24 24"><path d="M18.5 0h-14C3.12 0 2 1.12 2 2.5v19C2 22.88 3.12 24 4.5 24h14c1.38 0 2.5-1.12 2.5-2.5v-19C21 1.12 19.88 0 18.5 0zm-7 23c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm7.5-4H4V3h15v16z"/></svg> <span>Tablet</span> <span class="size">768px</span></div><div class="viewport-option" data-viewport="mobile"><svg viewBox="0 0 24 24"><path d="M16 1H8C6.34 1 5 2.34 5 4v16c0 1.66 1.34 3 3 3h8c1.66 0 3-1.34 3-3V4c0-1.66-1.34-3-3-3zm-2 20h-4v-1h4v1zm3.25-3H6.75V4h10.5v14z"/></svg> <span>Mobile</span> <span class="size">375px</span></div></div></div><button class="btn" id="btn-import" disabled="disabled">Import Website</button><div class="progress-container" id="progress"><div class="progress-bar"><div class="progress-fill" style="width: 0%"></div></div><div class="progress-text">Preparing...</div></div><div class="status-message" id="status"></div><div class="spacer"></div><div class="footer">HTML to Design v1.0</div></div><script defer="defer">(()=>{"use strict";const t={desktop:{name:"Desktop",width:1440,height:900},mobile:{name:"Mobile",width:375,height:812},tablet:{name:"Tablet",width:768,height:1024}};class e{constructor(t=""){this.iframe=null,this.baseUrl=t}async parse(t,e="",i=1440,o=900){const r=await this.createSandboxIframe(i,o),n=r.contentDocument;if(this.baseUrl){const t=n.createElement("base");t.href=this.baseUrl,n.head.appendChild(t)}const s=this.buildFullDocument(t,e);n.open(),n.write(s),n.close(),await this.waitForLoad(r);const a=n.body,l=(a.getBoundingClientRect(),this.serializeDOM(a,n));return this.destroyIframe(),l}buildFullDocument(t,e){return t.toLowerCase().includes("<html")||t.toLowerCase().includes("<!doctype")?e?t.replace("</head>",`<style>${e}</style></head>`):t:`<!DOCTYPE html>\n<html>\n<head>\n  <meta charset="utf-8">\n  <style>\n    * { box-sizing: border-box; }\n    body { margin: 0; padding: 0; }\n    ${e}\n  </style>\n</head>\n<body>\n  ${t}\n</body>\n</html>`}createSandboxIframe(t,e){return new Promise(i=>{this.iframe&&this.destroyIframe();const o=document.createElement("iframe");o.style.position="fixed",o.style.left="-10000px",o.style.top="-10000px",o.style.width=`${t}px`,o.style.height=`${e}px`,o.style.border="none",o.style.visibility="hidden",o.sandbox.add("allow-same-origin"),document.body.appendChild(o),this.iframe=o,setTimeout(()=>i(o),50)})}waitForLoad(t){return new Promise(e=>{const i=t.contentDocument.querySelectorAll("img"),o=Array.from(i).map(t=>t.complete?Promise.resolve():new Promise(e=>{t.onload=()=>e(),t.onerror=()=>e(),setTimeout(e,3e3)}));Promise.all(o).then(()=>{setTimeout(e,200)})})}serializeDOM(t,e){const i=t.getBoundingClientRect(),o=e.defaultView.getComputedStyle(t);return{tag:t.tagName.toLowerCase(),attributes:this.getAttributes(t),computedStyle:this.extractStyles(o),boundingBox:{x:i.left,y:i.top,width:i.width,height:i.height},children:this.serializeChildren(t,e)}}serializeChildren(t,e){var i;const o=[];for(const r of Array.from(t.childNodes))if(r.nodeType===Node.ELEMENT_NODE){const t=r,i=t.tagName.toLowerCase(),n=e.defaultView.getComputedStyle(t);if("none"===n.display||"hidden"===n.visibility)continue;if("script"===i||"style"===i||"link"===i||"meta"===i||"noscript"===i)continue;const s=t.getBoundingClientRect();if(0===s.width&&0===s.height)continue;const a={type:"element",tag:i,attributes:this.getAttributes(t),computedStyle:this.extractStyles(n),boundingBox:{x:s.left,y:s.top,width:s.width,height:s.height},children:this.serializeChildren(t,e)};o.push(a)}else if(r.nodeType===Node.TEXT_NODE){const n=null===(i=r.textContent)||void 0===i?void 0:i.trim();if(!n)continue;const s=e.createRange();s.selectNodeContents(r);const a=s.getBoundingClientRect();if(0===a.width&&0===a.height)continue;const l=e.defaultView.getComputedStyle(t);o.push({type:"text",content:n,computedStyle:this.extractStyles(l),boundingBox:{x:a.left,y:a.top,width:a.width,height:a.height}})}return o}getAttributes(t){const e={};for(const i of Array.from(t.attributes))e[i.name]=i.value;return e}extractStyles(t){const e=["display","position","flexDirection","justifyContent","alignItems","flexWrap","gap","rowGap","columnGap","width","height","minWidth","minHeight","maxWidth","maxHeight","paddingTop","paddingRight","paddingBottom","paddingLeft","marginTop","marginRight","marginBottom","marginLeft","top","right","bottom","left","zIndex","fontFamily","fontSize","fontWeight","fontStyle","lineHeight","letterSpacing","textAlign","textDecoration","textTransform","color","backgroundColor","backgroundImage","backgroundSize","backgroundPosition","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","opacity","boxShadow","overflow","visibility","objectFit"],i={};for(const o of e){const e=t.getPropertyValue(this.camelToKebab(o));e&&""!==e&&"none"!==e&&"normal"!==e&&"auto"!==e&&(i[o]=e)}return i.display=t.getPropertyValue("display"),i.position=t.getPropertyValue("position"),i}camelToKebab(t){return t.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}destroyIframe(){this.iframe&&this.iframe.parentNode&&(this.iframe.parentNode.removeChild(this.iframe),this.iframe=null)}}let i=new Set(["desktop"]);function o(t){parent.postMessage({pluginMessage:t},"*")}function r(){const r=document.getElementById("url-input"),l=document.getElementById("btn-import");r.addEventListener("input",()=>{l.disabled=!r.value.trim()}),r.addEventListener("keydown",t=>{"Enter"!==t.key||l.disabled||l.click()}),l.addEventListener("click",async()=>{const d=r.value.trim();if(d){l.disabled=!0,n("Fetching website...",5),document.getElementById("status").classList.remove("visible");try{n("Downloading page...",10);const{html:r,baseUrl:s}=await async function(t){t.startsWith("http://")||t.startsWith("https://")||(t="https://"+t);const e=await fetch(t,{method:"GET",headers:{Accept:"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8","Accept-Language":"en-US,en;q=0.5"}});if(!e.ok)throw new Error(`Failed to fetch URL: ${e.status} ${e.statusText}`);const i=await e.text(),o=e.url||t,r=new URL(o).origin,n=i.match(/<title[^>]*>([^<]*)<\/title>/i),s=n?n[1].trim():void 0,a=function(t,e){const i=new URL(e);return t=t.replace(/(src|href|action)=["'](?!data:)(?!#)(?!javascript:)(?!mailto:)(?!tel:)([^"']+)["']/gi,(t,e,o)=>{try{return`${e}="${new URL(o,i).href}"`}catch(e){return t}}),t=t.replace(/url\(["']?(?!data:)([^"')]+)["']?\)/gi,(t,e)=>{try{return`url("${new URL(e.trim(),i).href}")`}catch(e){return t}}),t}(i,o);return{html:a,baseUrl:r,title:s}}(d),l=Array.from(i);for(let i=0;i<l.length;i++){const a=l[i],c=t[a],h=10+i/l.length*70;n(`Parsing ${c.name} layout...`,h);const m=new e(s),u=await m.parse(r,"",c.width,c.height);n(`Creating ${c.name} Figma frame...`,h+30),o({type:"import-dom",dom:Object.assign(Object.assign({},u),{attributes:Object.assign(Object.assign({},u.attributes),{"data-viewport":a,"data-source-url":d,"data-viewport-width":String(c.width),"data-viewport-height":String(c.height)})})})}n("Import complete!",100),a("success",`Imported ${d}`)}catch(t){a("error",t instanceof Error?t.message:"Failed to import"),s()}finally{l.disabled=!r.value.trim()}}})}function n(t,e){const i=document.getElementById("progress");i.classList.add("visible"),i.querySelector(".progress-fill").setAttribute("style",`width: ${e}%`),i.querySelector(".progress-text").textContent=t}function s(){document.getElementById("progress").classList.remove("visible")}function a(t,e){const i=document.getElementById("status");i.className=`status-message visible ${t}`,i.textContent=e}window.onmessage=t=>{const e=t.data.pluginMessage;if(e)switch(e.type){case"import-progress":n(e.message,e.percent);break;case"import-complete":n("Import complete!",100);break;case"import-error":s(),a("error",e.message)}},document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".viewport-option").forEach(t=>{t.addEventListener("click",()=>{const e=t.getAttribute("data-viewport");t.classList.contains("selected")?i.size>1&&(i.delete(e),t.classList.remove("selected")):(i.add(e),t.classList.add("selected"))})}),r()})})();</script></body></html>