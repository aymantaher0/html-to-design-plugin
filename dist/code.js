(()=>{"use strict";const t={transparent:"rgba(0,0,0,0)",black:"#000000",white:"#ffffff",red:"#ff0000",green:"#008000",blue:"#0000ff",yellow:"#ffff00",cyan:"#00ffff",magenta:"#ff00ff",gray:"#808080",grey:"#808080",silver:"#c0c0c0",maroon:"#800000",olive:"#808000",lime:"#00ff00",aqua:"#00ffff",teal:"#008080",navy:"#000080",fuchsia:"#ff00ff",purple:"#800080",orange:"#ffa500",pink:"#ffc0cb",brown:"#a52a2a",coral:"#ff7f50",crimson:"#dc143c",darkblue:"#00008b",darkgray:"#a9a9a9",darkgreen:"#006400",darkred:"#8b0000",gold:"#ffd700",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lightblue:"#add8e6",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightyellow:"#ffffe0",linen:"#faf0e6",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",oldlace:"#fdf5e6",orangered:"#ff4500",orchid:"#da70d6",peachpuff:"#ffdab9",peru:"#cd853f",plum:"#dda0dd",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",sienna:"#a0522d",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",steelblue:"#4682b4",tan:"#d2b48c",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellowgreen:"#9acd32"};function e(e){return e&&"transparent"!==e&&"none"!==e?(e=e.trim().toLowerCase(),t[e]&&(e=t[e]),e.startsWith("#")?function(t){3===(t=t.replace("#","")).length?t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]:4===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);return{r:parseInt(t.substring(0,2),16)/255,g:parseInt(t.substring(2,4),16)/255,b:parseInt(t.substring(4,6),16)/255,a:8===t.length?parseInt(t.substring(6,8),16)/255:1}}(e):e.startsWith("rgb")?function(t){const e=t.match(/rgba?\(\s*([\d.]+%?)\s*[,\s]\s*([\d.]+%?)\s*[,\s]\s*([\d.]+%?)\s*(?:[,/]\s*([\d.]+%?))?\s*\)/);if(!e)return null;const a=t=>t.endsWith("%")?parseFloat(t)/100:parseFloat(t)/255;return{r:a(e[1]),g:a(e[2]),b:a(e[3]),a:e[4]?e[4].endsWith("%")?parseFloat(e[4])/100:parseFloat(e[4]):1}}(e):e.startsWith("hsl")?function(t){const e=t.match(/hsla?\(\s*([\d.]+)\s*[,\s]\s*([\d.]+)%\s*[,\s]\s*([\d.]+)%\s*(?:[,/]\s*([\d.]+%?))?\s*\)/);if(!e)return null;const a=parseFloat(e[1])/360,r=parseFloat(e[2])/100,o=parseFloat(e[3])/100,n=e[4]?e[4].endsWith("%")?parseFloat(e[4])/100:parseFloat(e[4]):1,{r:i,g:s,b:l}=function(t,e,a){if(0===e)return{r:a,g:a,b:a};const r=(t,e,a)=>(a<0&&(a+=1),a>1&&(a-=1),a<1/6?t+6*(e-t)*a:a<.5?e:a<2/3?t+(e-t)*(2/3-a)*6:t),o=a<.5?a*(1+e):a+e-a*e,n=2*a-o;return{r:r(n,o,t+1/3),g:r(n,o,t),b:r(n,o,t-1/3)}}(a,r,o);return{r:i,g:s,b:l,a:n}}(e):null):null}function a(t){return!t||t.a<.01}function r(t,e){if(!t||"auto"===t||"none"===t)return 0;const a=parseFloat(t);return isNaN(a)?0:t.endsWith("px")?a:t.endsWith("rem")||t.endsWith("em")?16*a:t.endsWith("%")&&e?a/100*e:t.endsWith("vw")?a/100*1440:t.endsWith("vh")?a/100*900:t.endsWith("pt")?a*(4/3):a}function o(t){if(!t)return 400;const e={thin:100,hairline:100,extralight:200,ultralight:200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,extrabold:800,ultrabold:800,black:900,heavy:900},a=t.toLowerCase().replace(/[- ]/g,"");if(void 0!==e[a])return e[a];const r=parseInt(t,10);return isNaN(r)?400:r}function n(t){const e=t.includes("inset");let a="rgba(0,0,0,0.25)",r=t.replace("inset","").trim();const o=r.match(/(rgba?\([^)]+\)|hsla?\([^)]+\))/);if(o)a=o[1],r=r.replace(o[1],"").trim();else{const t=r.match(/(#[0-9a-fA-F]{3,8})/);t&&(a=t[1],r=r.replace(t[1],"").trim())}const n=r.match(/-?[\d.]+px/g);return!n||n.length<2?null:{offsetX:parseFloat(n[0]),offsetY:parseFloat(n[1]),blur:n[2]?parseFloat(n[2]):0,spread:n[3]?parseFloat(n[3]):0,color:a,inset:e}}function i(t,e){const a={100:"Thin",200:"ExtraLight",300:"Light",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"ExtraBold",900:"Black"},r=a[Object.keys(a).map(Number).reduce((e,a)=>Math.abs(a-t)<Math.abs(e-t)?a:e)]||"Regular";return e?`${r} Italic`:r}class s{constructor(t){this.imageCache=new Map,this.fontLoadErrors=new Set,this.progressCallback=t}async mapToFigma(t,e){this.report("Creating Figma frame...",10);const a=figma.createFrame();a.name=(null==e?void 0:e.sourceUrl)?`Import: ${new URL(e.sourceUrl).hostname}`:"HTML Import",a.resize(Math.max(t.boundingBox.width,1),Math.max(t.boundingBox.height,1)),this.applyFrameStyles(a,t.computedStyle),a.clipsContent=!0,e&&a.setPluginData("importMetadata",JSON.stringify(e)),this.report("Mapping elements...",20);const r=this.countNodes(t.children);let o=0;for(const e of t.children){const n=await this.mapNode(e,t.boundingBox,t=>{o+=t;const e=20+Math.floor(o/r*60);this.report(`Mapping elements (${o}/${r})...`,e)});n&&a.appendChild(n)}return this.tryApplyAutoLayout(a,t.computedStyle),this.report("Import complete!",100),a}async mapNode(t,e,a){return"text"===t.type?(a(1),this.createTextNode(t,e)):this.mapElement(t,e,a)}async mapElement(t,e,a){const{tag:r,attributes:o,computedStyle:n,boundingBox:i,children:s}=t;if("img"===r)return a(1),this.createImageNode(t,e);if("svg"===r)return a(1),this.createSvgNode(t,e);if("input"===r||"textarea"===r||"select"===r)return a(1),this.createFormElement(t,e);if("hr"===r)return a(1),this.createHrNode(t,e);if(s.length>0&&s.every(t=>"text"===t.type)&&s.some(t=>"text"===t.type&&t.content.trim())){a(1);const r=s.filter(t=>"text"===t.type).map(t=>t.content).join(" ");return this.createTextFrame(t,r,e)}const l=figma.createFrame();l.name=this.generateNodeName(t),l.resize(Math.max(Math.round(i.width),1),Math.max(Math.round(i.height),1)),l.x=Math.round(i.x-e.x),l.y=Math.round(i.y-e.y),this.applyFrameStyles(l,n);for(const t of s){const e=await this.mapNode(t,i,a);e&&l.appendChild(e)}return this.tryApplyAutoLayout(l,n),a(1),l}async createTextNode(t,e){const{content:a,computedStyle:r,boundingBox:o}=t;if(!a.trim())return null;const n=figma.createText();return n.name=a.substring(0,40),n.x=Math.round(o.x-e.x),n.y=Math.round(o.y-e.y),await this.loadFont(r),n.characters=a,this.applyTextStyles(n,r),n.resize(Math.max(Math.round(o.width),1),Math.max(Math.round(o.height),1)),n.textAutoResize="HEIGHT",n}async createTextFrame(t,e,a){const{computedStyle:o,boundingBox:n}=t,i=figma.createFrame();i.name=this.generateNodeName(t),i.resize(Math.max(Math.round(n.width),1),Math.max(Math.round(n.height),1)),i.x=Math.round(n.x-a.x),i.y=Math.round(n.y-a.y),this.applyFrameStyles(i,o);const s=figma.createText();return s.name=e.substring(0,40),await this.loadFont(o),s.characters=e,this.applyTextStyles(s,o),i.layoutMode="VERTICAL",i.primaryAxisAlignItems="MIN",i.counterAxisAlignItems="MIN",i.layoutSizingHorizontal="FIXED",i.layoutSizingVertical="HUG",i.paddingTop=r(o.paddingTop),i.paddingRight=r(o.paddingRight),i.paddingBottom=r(o.paddingBottom),i.paddingLeft=r(o.paddingLeft),s.layoutSizingHorizontal="FILL",s.textAutoResize="HEIGHT",i.appendChild(s),i}async createImageNode(t,e){const{attributes:a,computedStyle:r,boundingBox:o}=t,n=a.src||"",i=figma.createRectangle();if(i.name=a.alt||"Image",i.resize(Math.max(Math.round(o.width),1),Math.max(Math.round(o.height),1)),i.x=Math.round(o.x-e.x),i.y=Math.round(o.y-e.y),n)try{const t=await this.fetchImage(n);t&&(i.fills=[{type:"IMAGE",imageHash:t,scaleMode:"FILL"}])}catch(t){i.fills=[{type:"SOLID",color:{r:.9,g:.9,b:.9}}]}return this.applyBorderRadius(i,r),i}async fetchImage(t){if(this.imageCache.has(t))return this.imageCache.get(t);try{const e=await fetch(t);if(!e.ok)return null;const a=await e.arrayBuffer(),r=figma.createImage(new Uint8Array(a));return this.imageCache.set(t,r.hash),r.hash}catch(t){return null}}createSvgNode(t,e){const{boundingBox:a}=t,r=this.reconstructSvgMarkup(t);try{const o=figma.createNodeFromSvg(r);return o.name=t.attributes["aria-label"]||"SVG",o.x=Math.round(a.x-e.x),o.y=Math.round(a.y-e.y),o.resize(Math.max(Math.round(a.width),1),Math.max(Math.round(a.height),1)),o}catch(t){const r=figma.createRectangle();return r.name="SVG (unsupported)",r.resize(Math.max(Math.round(a.width),1),Math.max(Math.round(a.height),1)),r.x=Math.round(a.x-e.x),r.y=Math.round(a.y-e.y),r.fills=[{type:"SOLID",color:{r:.85,g:.85,b:.85}}],r}}reconstructSvgMarkup(t){const e=Object.entries(t.attributes).map(([t,e])=>`${t}="${e}"`).join(" "),a=t.children.filter(t=>"element"===t.type).map(t=>this.reconstructSvgMarkup(t)).join("");return`<${t.tag} ${e}>${a}</${t.tag}>`}async createFormElement(t,e){const{tag:a,attributes:o,computedStyle:n,boundingBox:i}=t,s=figma.createFrame();s.name=`${a}${o.type?`[${o.type}]`:""}`,s.resize(Math.max(Math.round(i.width),1),Math.max(Math.round(i.height),1)),s.x=Math.round(i.x-e.x),s.y=Math.round(i.y-e.y),this.applyFrameStyles(s,n);const l=o.placeholder||o.value||"";if(l){const t=figma.createText();await this.loadFont(n),t.characters=l,this.applyTextStyles(t,n),s.layoutMode="HORIZONTAL",s.counterAxisAlignItems="CENTER",s.paddingLeft=r(n.paddingLeft)||8,s.paddingRight=r(n.paddingRight)||8,t.layoutSizingHorizontal="FILL",s.appendChild(t)}return s}createHrNode(t,a){const{computedStyle:r,boundingBox:o}=t,n=figma.createRectangle();n.name="Divider",n.resize(Math.max(Math.round(o.width),1),Math.max(Math.round(o.height)||1,1)),n.x=Math.round(o.x-a.x),n.y=Math.round(o.y-a.y);const i=e(r.borderTopColor||r.borderColor),s=e(r.backgroundColor),l=i||s||{r:.8,g:.8,b:.8,a:1};return n.fills=[{type:"SOLID",color:{r:l.r,g:l.g,b:l.b},opacity:l.a}],n}applyFrameStyles(t,r){const o=e(r.backgroundColor);if(o&&!a(o)?t.fills=[{type:"SOLID",color:{r:o.r,g:o.g,b:o.b},opacity:o.a}]:t.fills=[],r.backgroundImage&&r.backgroundImage.startsWith("linear-gradient")){const e=this.parseLinearGradient(r.backgroundImage);e&&(t.fills=[e])}if(r.opacity){const e=parseFloat(r.opacity);isNaN(e)||(t.opacity=e)}this.applyBorderRadius(t,r),this.applyBorders(t,r),this.applyBoxShadow(t,r),"hidden"===r.overflow||"scroll"===r.overflow||"auto"===r.overflow?t.clipsContent=!0:t.clipsContent=!1}applyBorderRadius(t,e){const a=r(e.borderTopLeftRadius),o=r(e.borderTopRightRadius),n=r(e.borderBottomRightRadius),i=r(e.borderBottomLeftRadius);a===o&&o===n&&n===i?t.cornerRadius=a:(t.topLeftRadius=a,t.topRightRadius=o,t.bottomRightRadius=n,t.bottomLeftRadius=i)}applyBorders(t,o){const n=r(o.borderTopWidth),i=r(o.borderRightWidth),s=r(o.borderBottomWidth),l=r(o.borderLeftWidth);if(0===n&&0===i&&0===s&&0===l)return;const c=e(o.borderTopColor||o.borderRightColor||o.borderBottomColor||o.borderLeftColor);if(!c||a(c))return;const d=Math.max(n,i,s,l);t.strokes=[{type:"SOLID",color:{r:c.r,g:c.g,b:c.b},opacity:c.a}],t.strokeWeight=d,t.strokeAlign="INSIDE",n===i&&i===s&&s===l||(t.strokeTopWeight=n,t.strokeRightWeight=i,t.strokeBottomWeight=s,t.strokeLeftWeight=l)}applyBoxShadow(t,a){const r=function(t){if(!t||"none"===t)return[];const e=[],a=function(t){const e=[];let a=0,r="";for(const o of t)"("===o&&a++,")"===o&&a--,","===o&&0===a?(e.push(r),r=""):r+=o;return r.trim()&&e.push(r),e}(t);for(const t of a){const a=n(t.trim());a&&e.push(a)}return e}(a.boxShadow);if(0===r.length)return;const o=r.map(t=>{const a=e(t.color)||{r:0,g:0,b:0,a:.25};return{type:t.inset?"INNER_SHADOW":"DROP_SHADOW",color:{r:a.r,g:a.g,b:a.b,a:a.a},offset:{x:t.offsetX,y:t.offsetY},radius:t.blur,spread:t.spread,visible:!0,blendMode:"NORMAL"}});t.effects=o}applyTextStyles(t,a){const n=this.cleanFontFamily(a.fontFamily),s=i(o(a.fontWeight),"italic"===a.fontStyle);try{t.fontName={family:n,style:s}}catch(t){}const l=r(a.fontSize);if(l>0&&(t.fontSize=l),a.lineHeight){const e=r(a.lineHeight);e>0&&(t.lineHeight={value:e,unit:"PIXELS"})}if(a.letterSpacing){const e=r(a.letterSpacing);t.letterSpacing={value:e,unit:"PIXELS"}}const c=e(a.color);var d;c&&(t.fills=[{type:"SOLID",color:{r:c.r,g:c.g,b:c.b},opacity:c.a}]),t.textAlignHorizontal=function(t){switch(t){case"center":return"CENTER";case"right":case"end":return"RIGHT";case"justify":return"JUSTIFIED";default:return"LEFT"}}(a.textAlign),t.textDecoration=(d=a.textDecoration)?d.includes("underline")?"UNDERLINE":d.includes("line-through")?"STRIKETHROUGH":"NONE":"NONE",t.textCase=function(t){switch(t){case"uppercase":return"UPPER";case"lowercase":return"LOWER";case"capitalize":return"TITLE";default:return"ORIGINAL"}}(a.textTransform)}tryApplyAutoLayout(t,e){const a=e.display;if("flex"!==a&&"inline-flex"!==a)return;const o=e.flexDirection;switch(t.layoutMode="column"===o||"column-reverse"===o?"VERTICAL":"HORIZONTAL",e.justifyContent){case"center":t.primaryAxisAlignItems="CENTER";break;case"flex-end":case"end":t.primaryAxisAlignItems="MAX";break;case"space-between":t.primaryAxisAlignItems="SPACE_BETWEEN";break;default:t.primaryAxisAlignItems="MIN"}switch(e.alignItems){case"center":t.counterAxisAlignItems="CENTER";break;case"flex-end":case"end":t.counterAxisAlignItems="MAX";break;case"baseline":t.counterAxisAlignItems="BASELINE";break;default:t.counterAxisAlignItems="MIN"}"wrap"!==e.flexWrap&&"wrap-reverse"!==e.flexWrap||(t.layoutWrap="WRAP");const n=r(e.gap||e.columnGap);if(n>0&&(t.itemSpacing=n),"WRAP"===t.layoutWrap){const a=r(e.rowGap||e.gap);a>0&&(t.counterAxisSpacing=a)}t.paddingTop=r(e.paddingTop),t.paddingRight=r(e.paddingRight),t.paddingBottom=r(e.paddingBottom),t.paddingLeft=r(e.paddingLeft),t.layoutSizingHorizontal="FIXED",t.layoutSizingVertical="FIXED";for(const e of t.children)"layoutSizingHorizontal"in e&&(e.layoutSizingHorizontal="FIXED",e.layoutSizingVertical="FIXED")}parseLinearGradient(t){const a=t.match(/linear-gradient\(([^)]+)\)/);if(!a)return null;const r=a[1],o=this.splitGradientParts(r);if(o.length<2)return null;let n=180,i=0;const s=o[0].match(/^(\d+)deg$/);s?(n=parseFloat(s[1]),i=1):"to right"===o[0]?(n=90,i=1):"to left"===o[0]?(n=270,i=1):"to bottom"===o[0]?(n=180,i=1):"to top"===o[0]&&(n=0,i=1);const l=o.slice(i),c=[];for(let t=0;t<l.length;t++){const a=e(l[t].trim());a&&c.push({position:l.length>1?t/(l.length-1):0,color:{r:a.r,g:a.g,b:a.b,a:a.a}})}if(c.length<2)return null;const d=n*Math.PI/180,h=Math.cos(d),u=Math.sin(d);return{type:"GRADIENT_LINEAR",gradientTransform:[[h,u,.5-.5*h-.5*u],[-u,h,.5+.5*u-.5*h]],gradientStops:c}}splitGradientParts(t){const e=[];let a=0,r="";for(const o of t)"("===o&&a++,")"===o&&a--,","===o&&0===a?(e.push(r.trim()),r=""):r+=o;return r.trim()&&e.push(r.trim()),e}async loadFont(t){const e=this.cleanFontFamily(t.fontFamily),a=i(o(t.fontWeight),"italic"===t.fontStyle),r=`${e}::${a}`;if(this.fontLoadErrors.has(r))try{await figma.loadFontAsync({family:"Inter",style:"Regular"})}catch(t){}else try{await figma.loadFontAsync({family:e,style:a})}catch(t){this.fontLoadErrors.add(r);try{await figma.loadFontAsync({family:e,style:"Regular"})}catch(t){try{await figma.loadFontAsync({family:"Inter",style:"Regular"})}catch(t){}}}}cleanFontFamily(t){if(!t)return"Inter";const e=t.split(",")[0].trim().replace(/["']/g,"");return{Arial:"Inter",Helvetica:"Inter","Helvetica Neue":"Inter","-apple-system":"Inter",BlinkMacSystemFont:"Inter","Segoe UI":"Inter","system-ui":"Inter","sans-serif":"Inter",serif:"Roboto Serif",monospace:"Roboto Mono","Times New Roman":"Roboto Serif",Georgia:"Roboto Serif","Courier New":"Roboto Mono",Courier:"Roboto Mono"}[e]||e}generateNodeName(t){var e;const{tag:a,attributes:r}=t,o=r.id,n=null===(e=r.class)||void 0===e?void 0:e.split(" ").filter(Boolean).slice(0,2).join(".");return o?`${a}#${o}`:n?`${a}.${n}`:{nav:"Navigation",header:"Header",footer:"Footer",main:"Main",aside:"Sidebar",section:"Section",article:"Article",ul:"List",ol:"List",li:"ListItem",button:"Button",a:"Link",form:"Form",table:"Table",thead:"TableHead",tbody:"TableBody",tr:"TableRow",td:"TableCell",th:"TableHeader"}[a]||a}countNodes(t){let e=0;for(const a of t)e++,"element"===a.type&&(e+=this.countNodes(a.children));return Math.max(e,1)}report(t,e){this.progressCallback&&this.progressCallback(t,e)}}function l(t){figma.ui.postMessage(t)}figma.showUI(__html__,{width:340,height:400}),figma.ui.onmessage=async t=>{switch(t.type){case"import-dom":await async function(t){try{l({type:"import-started"});const e=new s((t,e)=>{l({type:"import-progress",message:t,percent:e})}),a={sourceUrl:t.attributes["data-source-url"],importedAt:(new Date).toISOString()},r=t.attributes["data-viewport"];r&&(a.viewport=r);const o=await e.mapToFigma(t,a),n=figma.currentPage.children.filter(t=>"FRAME"===t.type&&t.name.startsWith("Import:"));if(n.length>0){const t=n[n.length-1];o.x=t.x+t.width+40,o.y=t.y}else o.x=figma.viewport.center.x-o.width/2,o.y=figma.viewport.center.y-o.height/2;if(r){const e=t.attributes["data-viewport-width"];o.name=`${o.name} - ${r} (${e}px)`}figma.currentPage.selection=[o],figma.viewport.scrollAndZoomIntoView([o]),l({type:"import-complete",nodeId:o.id})}catch(t){l({type:"import-error",message:t instanceof Error?t.message:"Unknown error during import"})}}(t.dom);break;case"resize":figma.ui.resize(t.width,t.height)}}})();